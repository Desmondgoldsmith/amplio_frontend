---
import { Image } from 'astro:assets';

const slides = [
  {
    titleMain: "USAGE",
    titleSub: "scenarios",
    description: "(explore a few examples)",
    image: "/assets/partners/amplio-connect.jpg",
    credit: "© UNICEF Ghana/Joseph Mills"
  },
  {
    title: "Keep communities in the loop",
    description: "Include representatives of participating communities. After providing their contact information, you can rely on SBC Impact Designer to automatically alert stakeholders about updates or requested feedback for all relevant program decisions and milestones – whether or not they have a login account on this platform."
  },
  {
    title: "Create your MEL plan",
    description: "Develop your monitoring, evaluation, and learning (MEL) plan with questions to guide your process — along with recommended indicators, participatory tools, and data collection strategies."
  },
  {
    title: "Access data collection tools",
    description: "Access field-tested data collection tools that allow you to dig deeper in order to answer any remaining questions that remain to complete your formative assessment."
  },
  {
    title: "Identify behavioral drivers",
    description: "Identify the relevant behavior drivers for your intended outcomes and formative research. Then, document the research, identify any gaps, and review potential interventions to address key drivers."
  },
  {
    title: "Develop your ToC",
    description: "Develop your social and behavior change Theory of Change (ToC), including intermediate outcomes, best platforms for engagement, risks to be mitigated, and assumptions in the model that must be confirmed before each activity."
  },
  {
    title: "Plan and manage your program",
    description: "Easily set and update the schedule. For each activity, list the participants and assign the responsible staff members. Then, track upcoming activities, assumptions to verify, and monitoring of activities and outputs."
  },
  {
    title: "See your program through their eyes",
    description: "Each activity lists the relevant participants, so you can now preview your program from beginning to end, with activities filtered to each participant type (or persona). Are you expecting too much from this participant? Have you left something out?"
  },
];
---

<main class="py-8 mt-28">
    <section class=" max-w-4xl mx-auto text-center px-4 mb-12">
      <h1 class="text-4xl font-bold mb-4">SBC Impact Designer</h1>
      <p class="text-gray-700 mb-6 max-w-xl mx-auto">
        Amplio is creating an open-source, social and behavior change (SBC) 
        digital platform — co-designed with and for SBC practitioners.
      </p>
      
      <div class="mb-8">
        <a 
          href="https://youtu.be/your-video-id" 
          target="_blank" 
          rel="noopener noreferrer"
          class="text-blue-500 hover:text-blue-600 flex items-center justify-center gap-2"
        >
          <span>➡️</span>
          <span class="text-blue-500">Watch am SBC Impact Designer product demo and Q&A - a video recording of our webinar on April 19, 2023 ></span>
        </a>
      </div>

      <div class="aspect-video mb-4">
        <iframe
          class="w-full h-full"
          src="https://www.youtube.com/embed/your-video-id"
          title="SBC Impact Designer"
          frameborder="0"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen
        ></iframe>
      </div>

      <p class="text-gray-700">
        Watch the SBC Impact Designer video with 
        <a 
          href="#" 
          class="text-blue-500 hover:text-blue-600"
          target="_blank"
          rel="noopener noreferrer"
        >
          French subtitles here
        </a>.
      </p>
    </section>

    <section class="mb-12">
      <h2 class="text-3xl font-bold text-center mb-6">The Problem</h2>
      <p class="text-gray-700 text-center max-w-2xl mx-auto">
        Development organizations recognize the benefit of SBC programming 
        but they often don't know where to start. There's a lot to consider when 
        integrating SBC approaches into program design, implementation, 
        management, and accountability. Even programs with a strong SBC 
        foundation can fail when there's a gap between design (e.g., theory of 
        change) and implementation (tracking each activity).
      </p>
    </section>

    <section class="text-center">
      <h2 class="text-3xl font-bold mb-6">Our Solution</h2>
      <p class="text-gray-700 mb-6 max-w-2xl mx-auto">
        SBC Impact Designer offers guidance to help you design, plan, 
        manage, and evaluate each step of your social and behavior change 
        program. It integrates SBC best practices, intuitive project 
        management, and human-centered design.
      </p>
      <p class="text-gray-700 max-w-2xl mx-auto">
        Most importantly, SBC Impact Designer supports collaboration with 
        communities and all stakeholders for learning and success.
      </p>
    </section>

  <section class="relative w-full mt-10 h-[600px] bg-[#2A8B9D] overflow-hidden">
  <button 
    class="absolute left-8 top-1/2 -translate-y-1/2 z-20 text-white hover:text-gray-200 transition-colors" 
    id="prevBtn"
  >
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-12 h-12">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
    </svg>
  </button>
  <button 
    class="absolute right-8 top-1/2 -translate-y-1/2 z-20 text-white hover:text-gray-200 transition-colors" 
    id="nextBtn"
  >
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" class="w-12 h-12">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
    </svg>
  </button>

  <!-- Slides Container -->
  <div class="slides-container relative w-full h-full">
    {slides.map((slide, index) => (
      <div 
        class={`slide absolute w-full h-full transition-opacity duration-500 ${index === 0 ? 'opacity-100' : 'opacity-0'}`}
        data-index={index}
      >
        {index === 0 ? (
          <!-- First slide layout - Centered content -->
          <div class="flex items-center justify-center h-full">
            <div class="flex items-center gap-8 max-w-6xl mx-auto px-8">
              <div class="slide-content">
                <h2 class="text-white text-7xl font-bold tracking-wide mb-2">
                  {slide.titleMain}
                </h2>
                <p class="text-white text-5xl italic mb-4">
                  {slide.titleSub}
                </p>
                <p class="text-white text-xl">
                  {slide.description}
                </p>
              </div>
              <div class="relative">
                <img 
                  src={slide.image}
                  alt="Usage scenarios"
                  class="w-[500px] h-[300px] object-cover rounded"
                />
                <p class="absolute bottom-2 right-2 text-white text-sm">
                  {slide.credit}
                </p>
              </div>
            </div>
          </div>
        ) : (
          <!-- Other slides layout -->
          <div class="flex items-center justify-center h-full px-16">
            <div class="max-w-3xl text-center">
              <h2 class="text-white text-4xl font-bold mb-8">
                {slide.title}
              </h2>
              <p class="text-white text-xl leading-relaxed">
                {slide.description}
              </p>
            </div>
          </div>
        )}
      </div>
    ))}
  </div>
</section>
</div>
</main>

<script>
  type SlideElement = HTMLElement;
  type ButtonElement = HTMLElement | null;
  
  let currentSlide = 0;
  const slides: NodeListOf<SlideElement> = document.querySelectorAll('.slide');
  const totalSlides: number = slides.length;
  let slideInterval: number;

  function showSlide(index: number): void {
    slides.forEach((slide: SlideElement) => {
      slide.style.opacity = '0';
      slide.style.pointerEvents = 'none';
    });
    
    slides[index].style.opacity = '1';
    slides[index].style.pointerEvents = 'auto';
    
    const content = slides[index].querySelector('.slide-content');
    if (content) {
      content.classList.add('animate-slideIn');
    }
  }

  function nextSlide(): void {
    currentSlide = (currentSlide + 1) % totalSlides;
    showSlide(currentSlide);
  }

  function prevSlide(): void {
    currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
    showSlide(currentSlide);
  }

  function startSlideShow(): void {
    slideInterval = window.setInterval(nextSlide, 6000);
  }

  const nextButton: ButtonElement = document.getElementById('nextBtn');
  const prevButton: ButtonElement = document.getElementById('prevBtn');

  nextButton?.addEventListener('click', () => {
    window.clearInterval(slideInterval);
    nextSlide();
    startSlideShow();
  });

  prevButton?.addEventListener('click', () => {
    window.clearInterval(slideInterval);
    prevSlide();
    startSlideShow();
  });

  startSlideShow();
</script>

<style>
  @keyframes slideIn {
    from {
      transform: translateX(100px);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .animate-slideIn {
    animation: slideIn 0.5s ease-out forwards;
  }

  .slide {
    transition: opacity 0.5s ease-in-out;
  }
</style>