---
import { Image } from 'astro:assets';

const stats = [
  {
    number: "99",
    label: "Projects",
    icon: "/assets/homepageAssets/projects.png"
  },
  {
    number: "2,066,428",
    label: "People reached",
    icon: "/public/assets/homepageAssets/peopleReached.png"
  },
  {
    number: "15",
    label: "Countries",
    icon: "/public/assets/homepageAssets/countries.png"
  }
];

---

<section class="mt-32">
 <section>
  <div class="max-w-[2000px] mx-auto px-52">
    <h1 class="text-4xl font-bold mb-4 text-center">Our Impact</h1>

     <p class = "max-w-xl mb-4 mx-auto text-center">Millions of people lack access to knowledge because of poverty, low literacy, and gender inequalities. We amplify program reach and knowledge sharing through audio technology. See our program map below.</p>

    <div class="grid grid-cols-3 gap-8  px-24">
      {stats.map(stat => (
        <div class="flex flex-col items-center">
          <div class="w-48 h-48 mb-6">
            <img 
              src={stat.icon} 
              alt={stat.label} 
              class="w-full h-full object-contain p-6 rounded-full overflow-hidden" 
            />
          </div>
          <div class="text-center">
            <p class="text-[#FF5843] text-5xl font-bold mb-2">{stat.number}</p>
            <p class="text-gray-700">{stat.label}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<section class="max-w-7xl mx-auto py-16 px-4 mt-10 text-center md:px-8 bg-white">
    <div>
      <div id="loading-spinner" class="flex justify-center items-center py-8">
        <div class="animate-spin rounded-full h-12 w-12 border-4 border-gray-300 border-t-blue-600"></div>
      </div>
      <div class='tableauPlaceholder' id='viz1739537606973' style='position: relative'>
        <noscript>
          <a href='https://www-amplio-org.filesusr.com/'>
            <img 
              alt='Dashboard 1' 
              src='https://public.tableau.com/static/images/Ta/TalkingBookPrograms4/Dashboard1/1_rss.png' 
              style='border: none' 
            />
          </a>
        </noscript>
        <object class='tableauViz' style='display:none;'>
          <param name='host_url' value='https%3A%2F%2Fpublic.tableau.com%2F' /> 
          <param name='embed_code_version' value='3' /> 
          <param name='site_root' value='' />
          <param name='name' value='TalkingBookPrograms4/Dashboard1' />
          <param name='tabs' value='no' />
          <param name='toolbar' value='yes' />
          <param name='static_image' value='https://public.tableau.com/static/images/Ta/TalkingBookPrograms4/Dashboard1/1.png' /> 
          <param name='animate_transition' value='yes' />
          <param name='display_static_image' value='yes' />
          <param name='display_spinner' value='yes' />
          <param name='display_overlay' value='yes' />
          <param name='display_count' value='yes' />
          <param name='language' value='en-US' />
          <param name='increment_view_count' value='no' />
        </object>
      </div>
    </div>
  </section>

  <section class="w-full mt-5 pt-16 bg-white">
    <div class="grid grid-cols-1 md:grid-cols-2">
        <div class="relative">
            <img 
              src="/assets/impact/nurse.jpg" 
              alt="Recording an interview" 
              class="w-full h-[500px] object-cover "
            />
          </div>
        <div class = "p-8 text-center mt-16">
        <h2 class="text-3xl font-bold mb-6">Partnering For Impact</h2>
        <p class="text-gray-700 mb-8 max-w-3xl w-[550px] text-center mx-auto">
            We work with local experts, government agencies, and international organizations to share knowledge across many sectors.
        </p>
        <a
        href = "/case-studies"
        class="bg-white border-2 border-black px-6 py-2 font-medium hover:bg-gray-100 transition-colors"
        >
        READ A CASE STUDY
        </a>

      </div>
  </div>
</section>

<section class="w-full">
    <div class="grid grid-cols-1 md:grid-cols-2">
      <div class = "p-8 text-center mt-16">
        <h2 class="text-3xl font-bold mb-6">Amplifying Community Voices</h2>
        <p class="text-gray-700 mb-8 max-w-3xl w-[550px] text-center mx-auto">
            Our technology creates a community feedback loop that's hard to match in the remote areas we work. 
        </p>
        <button class="bg-white border-2 border-black px-6 py-2 font-medium hover:bg-gray-100 transition-colors">
          <a href = "/team">
               LEARN MORE
          </a>
        </button>
      </div>
      <div class="relative">
        <img 
          src="/assets/impact/man.jpg" 
          alt="Community facilitation session" 
          class="w-full h-[500px] object-cover "
        />
      </div>
  </div>
</section>
<section class = "max-w-[2000px] mt-10 mb-10">
    <div class=" mx-auto px-52">
      <h1 class="text-4xl font-bold mb-4 text-center">Our Technology in Action</h1>
  
       <p class = "max-w-xl mb-4 mx-auto text-center">Through Talking Book programs and partnerships, we're sharing knowledge to help families grow more food, earn income, and keep their children safe and healthy.</p>

     <!-- add blog post here -->
    </section>  
    <section class = "mt-16">
        <div class="border-t pt-12 ">
            <div class="max-w-4xl space-y-10 mx-auto text-center">
              <img 
              src= "/assets/impact/meda.png" 
              alt="Meda logo" 
              class="h-20 mx-auto"
            />
              <blockquote class="text-xl text-gray-700 italic max-w-2xl mx-auto mb-8">
                "With the Amplio Talking Book, people can access information in their own language, on demand. The Talking Book was our number one tool besides GROW field agents. Everyone loved it!"
              </blockquote>
  
              <p class = "max-w-xs mx-auto mb-5 text-sm text-gray-500 text-center space-y-5">Karen Walsh, Country Program Director,

                Greater Rural Opportunities for Women (GROW), MEDA</p>
             
            </div>
          </div>

          <div class="max-w-3xl mt-6 mx-auto">
            <div class="aspect-video bg-gray-200 rounded-lg overflow-hidden">
              <iframe 
                src="https://www.youtube.com/embed/J0rAtXfuYow?si=hddTGqE8NmMk8AAZ" 
                title="Project Video" 
                class="w-full h-full"
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen
              ></iframe>
            </div>
          </div>
    </section>
    <section class="relative h-[600px] mt-10 w-full overflow-hidden">
        <div class="absolute inset-0">
          <Image
            src="/assets/impact/mother.jpg"
            alt="Donation Background"
            width={1920}
            height={400}
            class="object-cover w-full h-full"
          />
          <div class="absolute inset-0 bg-black/30"></div>
        </div>
      
        <div class="relative h-full flex items-center">
          <div class="max-w-lg px-8 py-10 ml-auto md:mr-32 bg-[#425092] rounded-lg backdrop-blur-sm text-white">
            <h2 class="text-3xl font-semibold mb-4 text-center">Knowledge is Power</h2>
            <p class="text-xl mb-6 text-center">
              Help bridge the knowledge gap through inclusive digital technology and unlock potential for people with low literacy. 
            </p>
            <div class="text-center">
              <a 
                href="#" 
                class="inline-block px-8 py-3 bg-[#EC704E] text-white font-semibold rounded-md hover:bg-[#ff4730] transition-colors"
              >
                DONATE NOW
              </a>
            </div>
          </div>
        </div>
      </section>      
</section>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    const loadingSpinner = document.getElementById('loading-spinner');
    const divElement = document.getElementById('viz1739537606973');
    
    try {
      const vizElement = divElement.getElementsByTagName('object')[0];

      function setVizSize() {
        if (divElement.offsetWidth > 800) {
          vizElement.style.width = '1150px';
          vizElement.style.height = '527px';
        } else if (divElement.offsetWidth > 500) {
          vizElement.style.width = '1150px';
          vizElement.style.height = '527px';
        } else {
          vizElement.style.width = '100%';
          vizElement.style.height = '727px';
        }
      }

      const scriptElement = document.createElement('script');
      scriptElement.src = 'https://public.tableau.com/javascripts/api/viz_v1.js';
      
      scriptElement.onload = function() {
        setVizSize();
        if (loadingSpinner) {
          loadingSpinner.style.display = 'none';
        }
        vizElement.style.display = 'block';
      };

      scriptElement.onerror = function() {
        console.error('Failed to load Tableau script');
        if (loadingSpinner) {
          loadingSpinner.innerHTML = '<p class="text-red-500">Failed to load visualization. Please refresh the page.</p>';
        }
      };

      vizElement.parentNode.insertBefore(scriptElement, vizElement);

      // Handle window resize
      window.addEventListener('resize', setVizSize);

      setTimeout(() => {
        if (loadingSpinner && loadingSpinner.style.display !== 'none') {
          loadingSpinner.style.display = 'none';
        }
      }, 10000);

    } catch (error) {
      console.error('Error initializing visualization:', error);
      if (loadingSpinner) {
        loadingSpinner.innerHTML = '<p class="text-red-500">Error loading visualization. Please refresh the page.</p>';
      }
    }
  });
</script>

<style>
  .tableauPlaceholder {
    width: 100%;
    max-width: 1150px;
    margin: 0 auto;
  }

  .tableauViz {
    max-width: 100%;
    margin: 0 auto;
  }
</style>